parameters:
  - name: api_inputs
    displayName: Inputs from API (json)
    type: string
  - name: config
    displayName: Inputs from user workflow (json)
    type: string


steps:
- bash: |
    export stk=$(echo '${{ parameters.config }}' | jq -cr '.stk // empty')
    execution_id=$(echo '${{ parameters.api_inputs }}' | jq -cr '.execution_id')

    curl -o script.sh https://workflow-api.qa.stackspot.com/workflows/$execution_id --header 'Authorization: Bearer $(secret_stk_login)'
    chmod +x script.sh
    sh script.sh